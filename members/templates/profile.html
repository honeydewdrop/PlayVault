{% extends 'navbar.html' %}

{% block content %}
    <h1>Welcome, {{ user.username }}!</h1>
    
    {% if user.profile.profile_picture %}
        <img src="{{ user.profile.profile_picture.url }}" alt="Profile Picture" style="width: 150px; height: 150px;">
    {% else %}
        <p>No profile picture uploaded yet.</p>
    {% endif %}

    <h2>Your Biography</h2>
    {% if user.profile.biography %}
        <p>{{ user.profile.biography }}</p>
    {% else %}
        <p>No biography added yet.</p>
    {% endif %}

    <h3>Update Profile</h3>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {{ form.non_field_errors }}
        <div>
            <label for="{{ form.profile_picture.id_for_label }}">Profile Picture:</label>
            {{ form.profile_picture }}
            {{ form.profile_picture.errors }}
        </div>
        <div>
            <label for="{{ form.biography.id_for_label }}">Biography:</label>
            <textarea name="biography" id="{{ form.biography.id_for_label }}" rows="4">{{ user.profile.biography }}</textarea>
            {{ form.biography.errors }}
        </div>
        <button type="submit">Update Profile</button>
    </form>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}